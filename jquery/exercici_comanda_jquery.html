<!DOCTYPE html>
<html lang="ca">
  <head>
    <!--Required meta tags-->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="author" content="El Juank" />
    <title>Exercici comanda</title>
    <link rel="icon" href="" />
    <!--Bootstrap CSS-->
    <link rel="stylesheet" href="../css/css/bootstrap.min.css" />
    <!--Font Awesome CDN-->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
      rel="stylesheet"
    />
    <!--Estils propis-->
    <link href="" rel="stylesheet" type="text/css" />
    <!--jQuery-->
    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"
    ></script>
    <!--jQueryUI-->
    <script
      src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"
      integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30="
      crossorigin="anonymous"
    ></script>
    <!--jQueryUI CSS-->
    <link
      rel="stylesheet"
      href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"
    />
    <!--Estils-->
    <style type="text/css">
      table {
        border: 1px solid gray;
      }
      table tr td {
        padding: 15px;
      }
      table tr td:first-of-type {
        width: 12%;
      }
      table tr td input[type="checkbox"] {
        margin-left: 15px;
      }
      table tr td img {
        max-width: 80px;
      }
      table tr td button {
        width: 30px;
        height: 30px;
      }
      table tr td .preus {
        width: 25%;
        text-align: center;
        border: 0px;
      }
      table tr td .quantitats {
        width: 10%;
        text-align: center;
        border: 0px;
      }
      table tr td #total {
        width: 50%;
        text-align: center;
        border: 0px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <table class="text-center" border="1" width="100%">
        <tr>
          <td><input type="checkbox" id="marcarTot" /> Marcar tot</td>
          <td>&nbsp;</td>
          <td>Producte</td>
          <td>Preu</td>
          <td>Quantitat</td>
          <td>Total</td>
        </tr>
        <tr>
          <td><input type="checkbox" id="checkboxProd1" /></td>
          <td>
            <img
              src="https://cdn.grupoelcorteingles.es/SGFM/dctm/MEDIA03/202009/18/00194481000019____3__1200x1200.jpg"
            />
          </td>
          <td>PS5</td>
          <td>
            <input
              type="text"
              readonly
              value="499.99"
              class="preus"
              id="preuProd1"
            />€
          </td>
          <td>
            <button id="botoMenys1">-</button>
            <input
              type="text"
              readonly
              value="1"
              class="quantitats"
              id="quantitatProd1"
            />
            <button id="botoMes1">+</button>
          </td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><input type="checkbox" id="checkboxProd2" /></td>
          <td>
            <img
              src="https://thumb.pccomponentes.com/w-530-530/articles/32/323078/1684-microsoft-xbox-series-x-1tb.jpg"
            />
          </td>
          <td>Xbox Series X</td>
          <td>
            <input
              type="text"
              readonly
              value="499.99"
              class="preus"
              id="preuProd2"
            />€
          </td>
          <td>
            <button id="botoMenys2">-</button>
            <input
              type="text"
              readonly
              value="1"
              class="quantitats"
              id="quantitatProd2"
            />
            <button id="botoMes2">+</button>
          </td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><input type="checkbox" id="checkboxProd3" /></td>
          <td>
            <img
              src="https://www.worten.es/i/a0ae08e55d91cdcdbf9fa89ba6571bb27d141d2b.jpg"
            />
          </td>
          <td>Nintendo Switch</td>
          <td>
            <input
              type="text"
              readonly
              value="299.49"
              class="preus"
              id="preuProd3"
            />€
          </td>
          <td>
            <button id="botoMenys3">-</button>
            <input
              type="text"
              readonly
              value="1"
              class="quantitats"
              id="quantitatProd3"
            />
            <button id="botoMes3">+</button>
          </td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td colspan="5"></td>
          <td><input type="text" readonly value="" id="total" /></td>
        </tr>
      </table>
    </div>
    <script language="javascript">
      $(function () {
        /* Checkbox "marcar tot" */
        $("#marcarTot").change(function () {
          var checkboxes = $(this).closest("table").find(":checkbox");
          checkboxes.prop("checked", $(this).is(":checked"));
        });

        /* Botons més/menys */
        var quantitatProd1 = $("#quantitatProd1");
        var quantitatProd2 = $("#quantitatProd2");
        var quantitatProd3 = $("#quantitatProd3");

        $("#botoMes1").click(function () {
          quantitatProd1.val(parseInt(quantitatProd1.val()) + 1);
          // Amb "parseInt" convertim el valor de l'input d'un string a un número
        });
        $("#botoMenys1").click(function () {
          if (quantitatProd1.val() > 1) {
            // Limitem el valor com a mínim a 1
            quantitatProd1.val(parseInt(quantitatProd1.val()) - 1);
          }
        });

        $("#botoMes2").click(function () {
          quantitatProd2.val(parseInt(quantitatProd2.val()) + 1);
        });
        $("#botoMenys2").click(function () {
          if (quantitatProd2.val() > 1) {
            quantitatProd2.val(parseInt(quantitatProd2.val()) - 1);
          }
        });

        $("#botoMes3").click(function () {
          quantitatProd3.val(parseInt(quantitatProd3.val()) + 1);
        });
        $("#botoMenys3").click(function () {
          if (quantitatProd3.val() > 1) {
            quantitatProd3.val(parseInt(quantitatProd3.val()) - 1);
          }
        });

        /* Preus */

        $("#checkboxProd1, #checkboxProd2, #checkboxProd3").change(function () {
          var preuProd1 = $("#preuProd1").val();
          var preuProd2 = $("#preuProd2").val();
          var preuProd3 = $("#preuProd3").val();
          var preuTotal = $("#total");

          var preuQuant1 = preuProd1 * quantitatProd1.val();
          var preuQuant2 = preuProd2 * quantitatProd2.val();
          var preuQuant3 = preuProd3 * quantitatProd3.val();

          var preuTotal1 = preuTotal.val() + preuQuant1;
          var preuTotal2 = preuTotal.val() + preuQuant2;
          var preuTotal3 = preuTotal.val() + preuQuant3;

          if ($("#checkboxProd1").prop("checked") == true) {
            //alert((parseFloat(preuProd1) + parseFloat(preuProd1)).toFixed(2));
            preuTotal.attr("value", preuTotal1);
          } else if ($("#checkboxProd2").prop("checked") == true) {
            preuTotal.attr("value", preuTotal2);
          }
        });

        /*$("#checkboxProd3").change(function () {
          if ($("#checkboxProd3").prop("checked") == true) {
            var preuQuant3 = preuProd3 * quantitatProd3.val();
            var preuTotal3 = preuQuant3 + $("#total").val();
            $("#total").attr("value", preuQuant3.toFixed(2) + "€");

            $("#botoMes3").click(function () {
              var preuQuant3 = preuProd3 * quantitatProd3.val();
              var preuTotal3 = preuQuant3 + $("#total").val();
              $("#total").attr("value", preuQuant3.toFixed(2) + "€");
            });
            $("#botoMenys3").click(function () {
              var preuQuant3 = preuProd3 * quantitatProd3.val();
              var preuTotal3 = preuQuant3 + $("#total").val();
              $("#total").attr("value", preuQuant3.toFixed(2) + "€");
            });
          } else {
            $("#total").attr("value", preuTotal);
            $("#botoMes3").click(function () {
              $("#total").attr("value", preuTotal);
            });
            $("#botoMenys3").click(function () {
              $("#total").attr("value", preuTotal);
            });
          }
        });*/
      });
    </script>
  </body>
</html>
